<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Admin Dashboard - Mind Mate</title>
    <meta
      name="description"
      content="Administrative dashboard for monitoring youth mental health and user analytics."
    />

    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <link rel="stylesheet" href="styles/main.css" />
    <style>
      .pulse-destructive {
        animation: pulseDestructive 2s infinite;
      }
      @keyframes pulseDestructive {
        0%,
        100% {
          box-shadow: 0 0 0 0 rgba(var(--destructive-rgb), 0.7);
        }
        50% {
          box-shadow: 0 0 0 8px rgba(var(--destructive-rgb), 0);
        }
      }
      .modal-container {
        opacity: 0;
        visibility: hidden;
        transition: opacity 0.3s ease, visibility 0.3s ease;
      }
      .modal-container.visible {
        opacity: 1;
        visibility: visible;
      }
      .modal-card {
        transform: scale(0.95);
        transition: transform 0.3s ease;
      }
      .modal-container.visible .modal-card {
        transform: scale(1);
      }
    </style>
  </head>

  <body>
    <div class="min-h-screen bg-gradient-soft">
      <header class="bg-card border" style="border-bottom: 1px solid var(--border)">
        <div class="container mx-auto px-4 py-4 flex justify-between items-center">
          <div class="flex items-center gap-3">
            <i data-lucide="brain" class="w-8 h-8 text-primary"></i>
            <div>
              <h1 class="text-xl font-bold">Admin Dashboard</h1>
              <p class="text-sm text-muted-foreground">Mental Health Monitoring Center</p>
            </div>
          </div>
          <button class="btn btn-outline btn-sm" onclick="logout()">Logout</button>
        </div>
      </header>

      <div class="container mx-auto px-4 py-8">
        <section class="mb-8">
          <h2 class="text-2xl font-bold mb-6">Overview</h2>
          <div class="grid md:grid-cols-4 gap-6">
            <div class="wellness-card">
              <div class="flex items-start justify-between p-6">
                <div>
                  <h3 class="text-sm font-medium text-muted-foreground">Total Users</h3>
                  <div class="text-3xl font-bold mt-1" data-count="861">0</div>
                  <p class="text-xs text-muted-foreground mt-1">+12% from last month</p>
                </div>
                <i data-lucide="users" class="w-5 h-5 text-muted-foreground"></i>
              </div>
            </div>
            <div class="wellness-card">
              <div class="flex items-start justify-between p-6">
                <div>
                  <h3 class="text-sm font-medium text-muted-foreground">Active Sessions</h3>
                  <div class="text-3xl font-bold mt-1" data-count="21">0</div>
                  <p class="text-xs text-muted-foreground mt-1">Currently ongoing</p>
                </div>
                <i data-lucide="message-circle" class="w-5 h-5 text-muted-foreground"></i>
              </div>
            </div>
            <div class="wellness-card">
              <div class="flex items-start justify-between p-6">
                <div>
                  <h3 class="text-sm font-medium text-muted-foreground">High Risk Users</h3>
                  <div class="text-3xl font-bold text-warning mt-1" data-count="11">0</div>
                  <p class="text-xs text-muted-foreground mt-1">Require attention</p>
                </div>
                <i data-lucide="alert-triangle" class="w-5 h-5 text-warning"></i>
              </div>
            </div>
            <div class="wellness-card">
              <div class="flex items-start justify-between p-6">
                <div>
                  <h3 class="text-sm font-medium text-muted-foreground">Avg Wellness Score</h3>
                  <div class="text-3xl font-bold text-wellness mt-1" data-count="78.5">0</div>
                  <p class="text-xs text-muted-foreground mt-1">+5.2% this week</p>
                </div>
                <i data-lucide="trending-up" class="w-5 h-5 text-wellness"></i>
              </div>
            </div>
          </div>
        </section>

        <div class="grid lg:grid-cols-3 gap-8">
          <div class="lg:col-span-2 space-y-6">
            <div class="wellness-card">
              <div class="card-header">
                <h3 class="card-title flex items-center gap-2">
                  <i data-lucide="activity" class="w-5 h-5 text-primary"></i>User Monitoring
                </h3>
                <p class="card-description">Real-time tracking of user wellness and engagement</p>
              </div>
              <div class="card-content">
                <div class="space-y-4" id="user-monitoring-list"></div>
              </div>
            </div>
          </div>

          <div class="space-y-6">
            <div class="wellness-card">
              <div class="card-header">
                <h3 class="card-title flex items-center gap-2">
                  <i data-lucide="alert-triangle" class="w-5 h-5 text-warning"></i>Recent Alerts
                </h3>
              </div>
              <div class="card-content space-y-4" id="recent-alerts"></div>
            </div>

            <div class="wellness-card">
              <div class="card-header"><h3 class="card-title">Quick Actions</h3></div>
              <div class="card-content space-y-3">
                <button class="btn btn-wellness w-full justify-start" onclick="viewAllUsers()">
                  <i data-lucide="users" class="w-4 h-4"></i>View All Users
                </button>
                <button class="btn btn-outline w-full justify-start" onclick="manageSessions()">
                  <i data-lucide="calendar" class="w-4 h-4"></i>Manage Sessions
                </button>
                <button
                  class="btn btn-outline w-full justify-start"
                  onclick="openReportModal()"
                >
                  <i data-lucide="trending-up" class="w-4 h-4"></i>Generate Report
                </button>
                <button
                  class="btn btn-outline w-full justify-start"
                  onclick="emergencyContacts()"
                >
                  <i data-lucide="phone" class="w-4 h-4"></i>Emergency Contacts
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div
      id="user-detail-modal"
      class="modal-container fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center"
    >
      <div class="modal-card wellness-card w-full max-w-lg max-h-[80vh] overflow-y-auto">
        <div class="card-header flex justify-between items-center">
          <h3 class="card-title">User Details</h3>
          <button onclick="closeUserDetail()" class="btn-icon">
            <i data-lucide="x" class="w-5 h-5"></i>
          </button>
        </div>
        <div class="card-content" id="user-detail-content"></div>
      </div>
    </div>

    <div
      id="report-modal"
      class="modal-container fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center"
    >
      <div class="modal-card wellness-card w-full max-w-2xl">
        <div class="card-header flex justify-between items-center">
          <h3 class="card-title">Weekly Wellness Report</h3>
          <button onclick="closeModal('report-modal')" class="btn-icon">
            <i data-lucide="x" class="w-5 h-5"></i>
          </button>
        </div>
        <div class="card-content min-h-[300px]" id="report-modal-content">
          <div id="generating-view" class="text-center p-8 flex flex-col justify-center items-center h-full">
            <div class="spinner mb-4"></div>
            <p class="font-medium text-lg">Generating Your Report...</p>
            <p class="text-sm text-muted-foreground mt-1">
              This may take a moment. We're analyzing the latest user data.
            </p>
          </div>

          <div id="report-view" class="hidden space-y-6">
            <div class="grid grid-cols-3 gap-4 text-center">
              <div class="stat-card">
                <div class="stat-value text-wellness">82%</div>
                <div class="stat-label">Positive Sentiment</div>
              </div>
              <div class="stat-card">
                <div class="stat-value">15h</div>
                <div class="stat-label">Avg. Weekly Engagement</div>
              </div>
              <div class="stat-card">
                <div class="stat-value text-destructive">5</div>
                <div class="stat-label">New High-Risk Users</div>
              </div>
            </div>
            <div>
              <h4 class="font-bold mb-2 text-center text-muted-foreground">Wellness Score Trend</h4>
              <canvas id="wellness-chart"></canvas>
            </div>
            <div class="text-right">
              <button class="btn btn-wellness" onclick="downloadReport()">
                <i data-lucide="download" class="w-4 h-4"></i>Download PDF
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div id="toast-container"></div>

    <script src="scripts/main.js"></script>
    <script src="scripts/admin-dashboard.js"></script>
  </body>
</html>